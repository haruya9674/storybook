<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>English Story Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: system-ui, sans-serif;
  background: #f2f6fb;
  padding: 16px;
}

.container {
  max-width: 800px;
  margin: auto;
  background: #ffffff;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

h1, h2 {
  text-align: center;
}

.story {
  white-space: pre-line;
  font-size: 16px;
  margin-bottom: 20px;
}

button {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  background: #4caf50;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  margin-top: 10px;
}

button.secondary {
  background: #2196f3;
}

button.answer {
  background: #ff9800;
}

button:hover {
  opacity: 0.9;
}

.question {
  margin-bottom: 16px;
}

select, input {
  font-size: 16px;
  padding: 8px;
  width: 100%;
}

.answer-text {
  font-size: 14px;
  color: #555;
  display: none;
}

.result {
  margin-top: 20px;
  font-weight: bold;
  text-align: center;
}

.correct { color: green; }
.wrong { color: red; }
</style>
</head>

<body>
<div class="container">

<h1 id="title"></h1>

<div class="story" id="story"></div>

<button onclick="startGame()">â–¶ Start Questions</button>

<div id="game" style="display:none; margin-top:25px;">
  <h2>Questions</h2>
  <div id="questions"></div>

  <button onclick="checkAnswers()">âœ” Check Answers</button>
  <button class="answer" onclick="showAnswers()">ðŸ‘€ Show Answers</button>
  <button class="secondary" onclick="nextStory()">âž¡ Next Story</button>

  <div id="result" class="result"></div>
</div>

</div>

<script>
// =====================
// STORY DATA (Extended)
// =====================
const stories = [

/* ---------- STORY 1 ---------- */
{
  title: "ðŸ°ðŸ¢ The Rabbit and the Turtle",
  text: `One sunny day, a rabbit and a turtle meet in the forest.

The rabbit is very fast.
He likes to run and show off.
He is proud of himself.

The turtle is slow.
He walks very slowly.
But he is calm and patient.

The rabbit laughs and says,
"Letâ€™s have a race!"

The turtle thinks for a moment.
Then he says,
"Okay. Letâ€™s race."

The race starts.
The rabbit runs very fast.
Soon, he is far in front of the turtle.

The rabbit looks back.
He sees the turtle far behind.

The rabbit says,
"I have a lot of time."
He sits under a tree and sleeps.

The turtle walks step by step.
He does not stop.
He walks past the sleeping rabbit.

At the end of the race,
the turtle reaches the finish line first.

The rabbit wakes up and runs fast,
but it is too late.

The turtle wins the race.

Slow and steady wins the race.`,
  questions: [
    {
      q: "Who are in the race?",
      a: "A rabbit and a turtle",
      options: ["A rabbit and a turtle", "A dog and a cat"]
    },
    {
      q: "Why does the rabbit sleep?",
      a: "He thinks he has time",
      options: ["He is sick", "He thinks he has time"]
    },
    {
      q: "What kind of animal is the turtle?",
      a: "Calm and patient",
      options: ["Fast and proud", "Calm and patient"]
    },
    {
      q: "Who wins the race?",
      a: "The turtle",
      options: ["The rabbit", "The turtle"]
    }
  ],
  grammar: [
    { q: "The rabbit is fast ____ proud.", a: "and" },
    { q: "The turtle is slow ____ calm.", a: "but" },
    { q: "The rabbit sleeps ____ he thinks he has time.", a: "because" }
  ]
},

/* ---------- STORY 2 ---------- */
{
  title: "ðŸ‘ Momotaro (Japanese Fairy Tale)",
  text: `Long ago, an old man and an old woman live in a small village.

Every day, the old man works outside.
The old woman works at home.

One day, the old woman goes to the river.
She sees a big peach in the water.

She takes the peach home.
When she cuts the peach,
a baby boy comes out.

They are very surprised and happy.
They name the boy Momotaro.

Momotaro grows up strong and kind.
He likes to help people.

One day, Momotaro hears about bad ogres.
The ogres hurt people in the village.

Momotaro says,
"I want to help."

He goes on a long trip.
On the way, he meets a dog, a monkey, and a bird.
They become good friends.

Together, they fight the ogres.
They work as a team.

The ogres lose.
Momotaro and his friends win.

Momotaro comes home safely.
Everyone is happy.`,
  questions: [
    {
      q: "Where do the old man and woman live?",
      a: "In a small village",
      options: ["In a city", "In a small village"]
    },
    {
      q: "Where does the peach come from?",
      a: "The river",
      options: ["The mountain", "The river"]
    },
    {
      q: "Why does Momotaro go on a trip?",
      a: "To help people",
      options: ["To find food", "To help people"]
    },
    {
      q: "Who helps Momotaro?",
      a: "His friends",
      options: ["The ogres", "His friends"]
    }
  ],
  grammar: [
    { q: "Momotaro is strong ____ kind.", a: "and" },
    { q: "He goes on a trip ____ he wants to help people.", a: "because" },
    { q: "The ogres are bad ____ Momotaro is brave.", a: "but" }
  ]
}

];

// =====================
// LOGIC (unchanged)
// =====================
let storyIndex = 0;

function loadStory() {
  const s = stories[storyIndex];
  document.getElementById("title").textContent = s.title;
  document.getElementById("story").textContent = s.text;
  document.getElementById("game").style.display = "none";
  document.getElementById("result").textContent = "";
}

loadStory();

function startGame() {
  const area = document.getElementById("questions");
  area.innerHTML = "";
  const s = stories[storyIndex];

  s.questions.forEach((item, i) => {
    area.innerHTML += `
      <div class="question">
        ${i + 1}. ${item.q}
        <select data-answer="${item.a}">
          <option value="">-- choose --</option>
          ${item.options.map(o => `<option>${o}</option>`).join("")}
        </select>
        <div class="answer-text">Answer: ${item.a}</div>
      </div>`;
  });

  area.innerHTML += `<h2>Grammar Practice</h2>`;

  s.grammar.forEach(item => {
    area.innerHTML += `
      <div class="question">
        ${item.q}
        <input data-answer="${item.a}">
        <div class="answer-text">Answer: ${item.a}</div>
      </div>`;
  });

  document.getElementById("game").style.display = "block";
}

function checkAnswers() {
  let score = 0;
  const inputs = document.querySelectorAll("[data-answer]");

  inputs.forEach(el => {
    if (el.value.toLowerCase() === el.dataset.answer.toLowerCase()) {
      score++;
    }
  });

  const result = document.getElementById("result");
  result.textContent = `Score: ${score} / ${inputs.length}`;
  result.className = "result " + (score >= inputs.length * 0.7 ? "correct" : "wrong");
}

function showAnswers() {
  document.querySelectorAll(".answer-text").forEach(el => {
    el.style.display = "block";
  });
}

function nextStory() {
  storyIndex++;
  if (storyIndex >= stories.length) storyIndex = 0;
  loadStory();
}
</script>

</body>
</html>

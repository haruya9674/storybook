<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>English Story Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: system-ui, sans-serif;
  background: #f2f6fb;
  padding: 16px;
}

.container {
  max-width: 800px;
  margin: auto;
  background: #ffffff;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

h1, h2 {
  text-align: center;
}

.story {
  white-space: pre-line;
  font-size: 16px;
  margin-bottom: 20px;
}

button {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  background: #4caf50;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}

button:hover {
  background: #43a047;
}

.question {
  margin-bottom: 16px;
}

select, input {
  font-size: 16px;
  padding: 8px;
  width: 100%;
}

.result {
  margin-top: 20px;
  font-weight: bold;
  text-align: center;
}

.correct { color: green; }
.wrong { color: red; }
</style>
</head>

<body>
<div class="container">

<h1 id="title"></h1>

<div class="story" id="story"></div>

<button onclick="startGame()">â–¶ Start Questions</button>

<div id="game" style="display:none; margin-top:25px;">
  <h2>Questions</h2>
  <div id="questions"></div>

  <button onclick="checkAnswers()">âœ” Check Answers</button>
  <div id="result" class="result"></div>
</div>

</div>

<script>
// =====================
// STORY DATA (EFL Level)
// =====================
const stories = [
{
  title: "ðŸ°ðŸ¢ The Rabbit and the Turtle",
  text: `One day, a rabbit and a turtle meet in the forest.

The rabbit is fast.
He is proud.

The turtle is slow.
He is calm.

The rabbit says,
"Letâ€™s race!"

The turtle says,
"Okay."

The race starts.

The rabbit runs very fast.
He is far in front.

He looks back.
The turtle is far behind.

The rabbit says,
"I have time."

He sleeps under a tree.

The turtle walks slowly.
He does not stop.

The turtle walks past the rabbit.

At the end,
the turtle wins the race.

Slow and steady wins the race.`,
  questions: [
    {
      q: "Who are in the race?",
      a: "A rabbit and a turtle",
      options: ["A rabbit and a turtle", "A dog and a cat"]
    },
    {
      q: "Who is fast?",
      a: "The rabbit",
      options: ["The rabbit", "The turtle"]
    },
    {
      q: "Why does the rabbit stop?",
      a: "He sleeps",
      options: ["He sleeps", "He is scared"]
    },
    {
      q: "What does the turtle do?",
      a: "He keeps walking",
      options: ["He keeps walking", "He sleeps too"]
    },
    {
      q: "Who wins the race?",
      a: "The turtle",
      options: ["The rabbit", "The turtle"]
    }
  ],
  grammar: [
    {
      q: "I like apples ____ I don't like bananas.",
      a: "but"
    },
    {
      q: "She stays at home ____ it is raining.",
      a: "because"
    },
    {
      q: "We go to school ____ we study English.",
      a: "and"
    },
    {
      q: "He is tired ____ he goes to bed.",
      a: "because"
    },
    {
      q: "Tom has a dog ____ a cat.",
      a: "and"
    }
  ]
}
];

// =====================
// LOGIC
// =====================
let current = stories[0];

document.getElementById("title").textContent = current.title;
document.getElementById("story").textContent = current.text;

function startGame() {
  const area = document.getElementById("questions");
  area.innerHTML = "";

  current.questions.forEach((item, i) => {
    area.innerHTML += `
      <div class="question">
        ${i + 1}. ${item.q}
        <select data-answer="${item.a}">
          <option value="">-- choose --</option>
          ${item.options.map(o => `<option>${o}</option>`).join("")}
        </select>
      </div>`;
  });

  area.innerHTML += `<h2>Grammar Practice</h2>`;

  current.grammar.forEach((item, i) => {
    area.innerHTML += `
      <div class="question">
        ${item.q}
        <input data-answer="${item.a}">
      </div>`;
  });

  document.getElementById("game").style.display = "block";
}

function checkAnswers() {
  let score = 0;
  const inputs = document.querySelectorAll("[data-answer]");

  inputs.forEach(el => {
    if (el.value.toLowerCase() === el.dataset.answer.toLowerCase()) {
      score++;
    }
  });

  const result = document.getElementById("result");
  result.textContent = `Score: ${score} / ${inputs.length}`;

  result.className = "result " + (score >= inputs.length * 0.7 ? "correct" : "wrong");
}
</script>

</body>
</html>
